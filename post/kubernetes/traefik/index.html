<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>kubernets 里配置 Traefik - goodking-bq's notes</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="goodking-bq"><meta name=description content="Træfɪk 是一个为了让部署微服务更加便捷而诞生的现代HTTP反向代理、负载均衡工具。 它支持多种后台 (Docker, Swarm, Kubernetes, Marathon, Mesos, Consul, Etcd, Zookeeper, BoltDB, Rest API, file…) 来自动"><meta name=keywords content="goodking-bq,notes"><meta name=generator content="Hugo 0.73.0 with theme even"><link rel=canonical href=https://goodking-bq.github.io/post/kubernetes/traefik/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><link href=/sass/main.min.827bcb823d5e0c6fac62486a5c6a8cf98d6ddc7eb2ba1139f6e563e3e85a233b.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="kubernets 里配置 Traefik"><meta property="og:description" content="Træfɪk 是一个为了让部署微服务更加便捷而诞生的现代HTTP反向代理、负载均衡工具。 它支持多种后台 (Docker, Swarm, Kubernetes, Marathon, Mesos, Consul, Etcd, Zookeeper, BoltDB, Rest API, file…) 来自动"><meta property="og:type" content="article"><meta property="og:url" content="https://goodking-bq.github.io/post/kubernetes/traefik/"><meta property="article:published_time" content="2020-05-20T09:22:19+08:00"><meta property="article:modified_time" content="2020-05-20T09:22:19+08:00"><meta itemprop=name content="kubernets 里配置 Traefik"><meta itemprop=description content="Træfɪk 是一个为了让部署微服务更加便捷而诞生的现代HTTP反向代理、负载均衡工具。 它支持多种后台 (Docker, Swarm, Kubernetes, Marathon, Mesos, Consul, Etcd, Zookeeper, BoltDB, Rest API, file…) 来自动"><meta itemprop=datePublished content="2020-05-20T09:22:19+08:00"><meta itemprop=dateModified content="2020-05-20T09:22:19+08:00"><meta itemprop=wordCount content="5524"><meta itemprop=keywords content="kubernetes,how-to,"><meta name=twitter:card content="summary"><meta name=twitter:title content="kubernets 里配置 Traefik"><meta name=twitter:description content="Træfɪk 是一个为了让部署微服务更加便捷而诞生的现代HTTP反向代理、负载均衡工具。 它支持多种后台 (Docker, Swarm, Kubernetes, Marathon, Mesos, Consul, Etcd, Zookeeper, BoltDB, Rest API, file…) 来自动"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Goodking-Bq</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>主页</li></a><a href=/post/><li class=mobile-menu-item>归档</li></a><a href=/tags/><li class=mobile-menu-item>标签</li></a><a href=/categories/><li class=mobile-menu-item>分类</li></a><a href=/about><li class=mobile-menu-item>关于</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Goodking-Bq</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><i class="fa fa-home" style=color:#16982b></i><a class=menu-item-link href=/>主页</a></li><li class=menu-item><i class="fa fa-archive" style=color:#16982b></i><a class=menu-item-link href=/post/>归档</a></li><li class=menu-item><i class="fa fa-tags" style=color:#16982b></i><a class=menu-item-link href=/tags/>标签</a></li><li class=menu-item><i class="fa fa-sitemap" style=color:#16982b></i><a class=menu-item-link href=/categories/>分类</a></li><li class=menu-item><i class="fa fa-user" style=color:#16982b></i><a class=menu-item-link href=/about>关于</a></li></ul></nav><link href=//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>kubernets 里配置 Traefik</h1><div class=post-meta><span class=post-time>2020-05-20</span><div class=post-category><a href=/categories/kubernetes/>kubernetes</a></div><span id=busuanzi_container_page_pv class=more-meta><span id=busuanzi_value_page_pv><img src=/img/spinner.svg alt=spinner.svg></span> times read</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#在-kubernetes-里配置-traefik>在 <strong>kubernetes</strong> 里配置 <strong>Traefik</strong></a><ul><li><a href=#定义-traefik的-kubernetes-kind>定义 Traefik的 Kubernetes kind</a></li><li><a href=#创建-rbac>创建 RBAC</a></li><li><a href=#部署-traefik>部署 <strong>Traefik</strong></a></li></ul></li><li><a href=#配置使用>配置使用</a><ul><li><a href=#traefik-管理页面>traefik 管理页面</a></li><li><a href=#kubernetes-dashboard>kubernetes dashboard</a></li><li><a href=#mongodb-开放访问>mongodb 开放访问</a></li><li><a href=#配置-basicauth-或是-digestauth-密码验证>配置 <strong>BasicAuth</strong> 或是 <strong>DigestAuth</strong> 密码验证</a></li></ul></li><li><a href=#最后附上traefik命令帮助>最后附上traefik命令帮助</a></li></ul></nav></div></div><div class=post-content><p><img src=/kubernetes/traefik-architecture.png alt=traefik></p><blockquote><p>Træfɪk 是一个为了让部署微服务更加便捷而诞生的现代HTTP反向代理、负载均衡工具。 它支持多种后台 (Docker, Swarm, Kubernetes, Marathon, Mesos, Consul, Etcd, Zookeeper, BoltDB, Rest API, file…) 来自动化、动态的应用它的配置文件设置。</p></blockquote><blockquote><p>traefik 通过Ingress规范来管理对群集服务的访问。</p></blockquote><h2 id=在-kubernetes-里配置-traefik>在 <strong>kubernetes</strong> 里配置 <strong>Traefik</strong></h2><h3 id=定义-traefik的-kubernetes-kind>定义 Traefik的 Kubernetes kind</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>ingressroutes.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRoute<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>ingressroutes<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>ingressroute<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>middlewares.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Middleware<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>middlewares<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>middleware<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>ingressroutetcps.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRouteTCP<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>ingressroutetcps<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>ingressroutetcp<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>ingressrouteudps.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRouteUDP<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>ingressrouteudps<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>ingressrouteudp<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>tlsoptions.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>TLSOption<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>tlsoptions<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>tlsoption<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>tlsstores.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>TLSStore<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>tlsstores<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>tlsstore<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apiextensions.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>CustomResourceDefinition<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefikservices.traefik.containo.us<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>group</span><span class=p>:</span><span class=w> </span>traefik.containo.us<span class=w>
</span><span class=w>  </span><span class=k>version</span><span class=p>:</span><span class=w> </span>v1alpha1<span class=w>
</span><span class=w>  </span><span class=k>names</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>TraefikService<span class=w>
</span><span class=w>    </span><span class=k>plural</span><span class=p>:</span><span class=w> </span>traefikservices<span class=w>
</span><span class=w>    </span><span class=k>singular</span><span class=p>:</span><span class=w> </span>traefikservice<span class=w>
</span><span class=w>  </span><span class=k>scope</span><span class=p>:</span><span class=w> </span>Namespaced<span class=w>
</span></code></pre></td></tr></table></div></div><blockquote><p>上面定了：</p><ul><li>IngressRoute： 路由，所有的入口</li><li>Middleware： 中间件，如登陆等</li><li>IngressRouteTCP： TCP路由，如mysql的路由</li><li>IngressRouteUDP： UDP 路由</li><li>TLSOption： TLS 选项</li><li>TLSStore： TLS存储</li><li>TraefikService： traefik service</li></ul></blockquote><h3 id=创建-rbac>创建 RBAC</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml>---<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ClusterRole<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>rbac.authorization.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-ingress-controller<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>rules</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>apiGroups</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=s2>&#34;&#34;</span><span class=w>
</span><span class=w>    </span><span class=k>resources</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- services<span class=w>
</span><span class=w>      </span>- endpoints<span class=w>
</span><span class=w>      </span>- secrets<span class=w>
</span><span class=w>    </span><span class=k>verbs</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- get<span class=w>
</span><span class=w>      </span>- list<span class=w>
</span><span class=w>      </span>- watch<span class=w>
</span><span class=w>  </span>- <span class=k>apiGroups</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- extensions<span class=w>
</span><span class=w>    </span><span class=k>resources</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- ingresses<span class=w>
</span><span class=w>    </span><span class=k>verbs</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- get<span class=w>
</span><span class=w>      </span>- list<span class=w>
</span><span class=w>      </span>- watch<span class=w>
</span><span class=w>  </span>- <span class=k>apiGroups</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- extensions<span class=w>
</span><span class=w>    </span><span class=k>resources</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- ingresses/status<span class=w>
</span><span class=w>    </span><span class=k>verbs</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- update<span class=w>
</span><span class=w>  </span>- <span class=k>apiGroups</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- traefik.containo.us<span class=w>
</span><span class=w>    </span><span class=k>resources</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- middlewares<span class=w>
</span><span class=w>      </span>- ingressroutes<span class=w>
</span><span class=w>      </span>- traefikservices<span class=w>
</span><span class=w>      </span>- ingressroutetcps<span class=w>
</span><span class=w>      </span>- ingressrouteudps<span class=w>
</span><span class=w>      </span>- tlsoptions<span class=w>
</span><span class=w>      </span>- tlsstores<span class=w>
</span><span class=w>    </span><span class=k>verbs</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- get<span class=w>
</span><span class=w>      </span>- list<span class=w>
</span><span class=w>      </span>- watch<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ClusterRoleBinding<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>rbac.authorization.k8s.io/v1beta1<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-ingress-controller<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>roleRef</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>apiGroup</span><span class=p>:</span><span class=w> </span>rbac.authorization.k8s.io<span class=w>
</span><span class=w>  </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ClusterRole<span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-ingress-controller<span class=w>
</span><span class=w></span><span class=k>subjects</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>kind</span><span class=p>:</span><span class=w> </span>ServiceAccount<span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-ingress-controller<span class=w>
</span><span class=w>    </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span></code></pre></td></tr></table></div></div><h3 id=部署-traefik>部署 <strong>Traefik</strong></h3><ul><li>yaml示例：</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span><span class=lnt>88
</span><span class=lnt>89
</span><span class=lnt>90
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>v1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ServiceAccount<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-ingress-controller<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>v1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>ConfigMap<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w></span><span class=k>data</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>traefik.yaml</span><span class=p>:</span><span class=w> </span><span class=sd>|
</span><span class=sd>    api:</span><span class=w>
</span><span class=w>      </span><span class=k>insecure</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>    </span><span class=k>log</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span><span class=w>    </span><span class=k>entrypoints</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>web</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>address</span><span class=p>:</span><span class=w> </span><span class=p>:</span><span class=m>80</span><span class=w>
</span><span class=w>      </span><span class=k>websecure</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>address</span><span class=p>:</span><span class=w> </span><span class=p>:</span><span class=m>443</span><span class=w>
</span><span class=w>      </span><span class=k>websecureudp</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>address</span><span class=p>:</span><span class=w> </span><span class=p>:</span><span class=m>443</span>/udp<span class=w>
</span><span class=w>    </span><span class=k>providers</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>kubernetescrd</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>    </span><span class=k>serverstransport</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>insecureskipverify</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>    </span><span class=k>certificatesresolvers</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>default</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>acme</span><span class=p>:</span><span class=w>
</span><span class=w>          </span><span class=k>httpChallenge</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=k>entryPoint</span><span class=p>:</span><span class=w> </span>web<span class=w>
</span><span class=w>          </span><span class=k>email</span><span class=p>:</span><span class=w> </span>goodking_bq@hotmail.com<span class=w>
</span><span class=w>          </span><span class=k>storage</span><span class=p>:</span><span class=w> </span>/mnt/acme.json<span class=w>
</span><span class=w>    </span><span class=k>metrics</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>prometheus</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>entryPoint</span><span class=p>:</span><span class=w> </span>web<span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>DaemonSet<span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apps/v1<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>  </span><span class=k>labels</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>app</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>selector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>matchLabels</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>app</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>  </span><span class=k>template</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>labels</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>app</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>    </span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>serviceAccountName</span><span class=p>:</span><span class=w> </span>traefik-ingress-controller<span class=w>
</span><span class=w>      </span><span class=k>hostNetwork</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>      </span><span class=k>terminationGracePeriodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>60</span><span class=w>
</span><span class=w>      </span><span class=k>nodeSelector</span><span class=p>:</span><span class=w>             </span><span class=c>## 设置node筛选器，在特定label的节点上启动</span><span class=w>
</span><span class=w>        </span><span class=k>IngressProxy</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span><span class=w>      </span><span class=k>containers</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>          </span><span class=k>image</span><span class=p>:</span><span class=w> </span>traefik<span class=p>:</span>v2<span class=m>.2</span><span class=w>
</span><span class=w>          </span><span class=k>ports</span><span class=p>:</span><span class=w>
</span><span class=w>            </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>web<span class=w>
</span><span class=w>              </span><span class=k>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span><span class=w>              </span><span class=k>hostPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span><span class=w>            </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>websecure<span class=w>
</span><span class=w>              </span><span class=k>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span><span class=w>              </span><span class=k>hostPort</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span><span class=w>          </span><span class=k>securityContext</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=k>capabilities</span><span class=p>:</span><span class=w>
</span><span class=w>              </span><span class=k>drop</span><span class=p>:</span><span class=w>
</span><span class=w>                </span>- ALL<span class=w>
</span><span class=w>              </span><span class=k>add</span><span class=p>:</span><span class=w>
</span><span class=w>                </span>- NET_BIND_SERVICE<span class=w>
</span><span class=w>          </span><span class=k>volumeMounts</span><span class=p>:</span><span class=w>
</span><span class=w>            </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>nfs-pvc<span class=w>
</span><span class=w>              </span><span class=k>mountPath</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/mnt&#34;</span><span class=w>
</span><span class=w>            </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>config<span class=w>
</span><span class=w>              </span><span class=k>mountPath</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/etc/traefik&#34;</span><span class=w>
</span><span class=w>      </span><span class=k>volumes</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>nfs-pvc<span class=w>
</span><span class=w>          </span><span class=k>persistentVolumeClaim</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=k>claimName</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>        </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>config<span class=w>
</span><span class=w>          </span><span class=k>configMap</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span></code></pre></td></tr></table></div></div><ul><li>说明</li></ul><p>使用了configmap配置traefik</p><ol><li><p>我这里添加了tls支持，就是https(443)的支持,通过 <code>--entrypoints.websecure.Address=:443</code> 参数启用</p></li><li><p>80 和 443 都用了 <strong>hostPort</strong> ,会在node上起相应的端口，通过端口可以访问服务</p></li><li><p><strong>Traefik</strong>支持acme生成 <em>Let&rsquo;s Encrypt</em> 证书, 获取证书有三种模式,通过 <code>--certificatesresolvers.{name}.acme.{type}</code>配置</p><ul><li>tlsChallenge:<blockquote><ul><li>通过端口443验证证书</li></ul></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>certificatesResolvers</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>myresolver</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>acme</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=c># ...</span><span class=w>
</span><span class=w>            </span><span class=k>tlsChallenge</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></code></pre></td></tr></table></div></div></li><li>httpChallenge: ，<blockquote><ul><li>通过端口80验证证书</li><li><code>--certificatesresolvers.myresolver.acme.httpchallenge.entrypoint=80</code> 必须设置</li></ul></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>entryPoints</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>web</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>address</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;:80&#34;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>websecure</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>address</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;:443&#34;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>certificatesResolvers</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>myresolver</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>acme</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=c># ...</span><span class=w>
</span><span class=w>            </span><span class=k>httpChallenge</span><span class=p>:</span><span class=w>
</span><span class=w>                </span><span class=k>entryPoint</span><span class=p>:</span><span class=w> </span>web<span class=w>
</span></code></pre></td></tr></table></div></div></li><li>dnsChallenge:<blockquote><ul><li>通过调域名提供商api添加一个域名text，验证。这需要额外的api认证参数</li><li>它支持很多域名商，具体可以看 <a href=https://docs.traefik.io/https/acme/#providers>providers 列表</a></li><li>它需要的参数都通过环境变量提供</li></ul></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yml data-lang=yml><span class=k>certificatesResolvers</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>myresolver</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>acme</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=k>dnsChallenge</span><span class=p>:</span><span class=w>
</span><span class=w>                </span><span class=k>provider</span><span class=p>:</span><span class=w> </span>alidns<span class=w>
</span><span class=w>                </span><span class=k>delayBeforeCheck</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></code></pre></td></tr></table></div></div></li></ul></li><li><p><strong>acme.json</strong> 保存acme信息，避免重复申请证书，导致申请次数过多而失败</p></li><li><p>取消了<strong>traefik</strong>和后端通信的tls验证，不需要了，因为<strong>traefik</strong>就支持tls, <strong>&ndash;serverstransport.insecureskipverify</strong> 参数实现</p></li><li><p>这里使用<strong>DaemonSets</strong>部署而不是<strong>Deployments</strong>,每台node和master都有一个</p><blockquote><ul><li>Deployments具有更轻松的上下扩展可能性。它可以实现完整的Pod生命周期并支持Kubernetes 1.2的滚动更新。至少需要一个Pod才能运行部署。</li><li>DaemonSet会自动缩放到满足特定选择器的所有节点，并保证一次填充一个节点。Kubernetes 1.7还为DaemonSets全面支持滚动更新。</li></ul></blockquote></li></ol><h2 id=配置使用>配置使用</h2><h3 id=traefik-管理页面>traefik 管理页面</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=c># 创建service，配置端口</span><span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>v1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Service<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>ports</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>protocol</span><span class=p>:</span><span class=w> </span>TCP<span class=w>
</span><span class=w>      </span><span class=k>name</span><span class=p>:</span><span class=w> </span>web<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span><span class=w>    </span>- <span class=k>protocol</span><span class=p>:</span><span class=w> </span>TCP<span class=w>
</span><span class=w>      </span><span class=k>name</span><span class=p>:</span><span class=w> </span>admin<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span><span class=w>    </span>- <span class=k>protocol</span><span class=p>:</span><span class=w> </span>TCP<span class=w>
</span><span class=w>      </span><span class=k>name</span><span class=p>:</span><span class=w> </span>websecure<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span><span class=w>  </span><span class=k>selector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>app</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w> 
</span><span class=w></span><span class=c># 创建IngressRoute，使用 traefik</span><span class=w>
</span><span class=w></span><span class=c># 同时使用了http和https,按需要添加</span><span class=w>
</span><span class=w></span><span class=c># tls.certResolver =default 是 --certificatesresolvers.default(name).acme.tlschallenge 配置的名字</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>traefik.containo.us/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRoute<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>simpleingressroute-traefik<span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>entryPoints</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- web<span class=w>
</span><span class=w>  </span><span class=k>routes</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>match</span><span class=p>:</span><span class=w> </span>Host(`traefik.kube.example.com`)<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Rule<span class=w>
</span><span class=w>    </span><span class=k>services</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span><span class=w>
</span><span class=w></span>---<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>traefik.containo.us/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRoute<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>ingressroutetls-traefik<span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>entryPoints</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- websecure<span class=w>
</span><span class=w>  </span><span class=k>routes</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>match</span><span class=p>:</span><span class=w> </span>Host(`traefik.kube.example.com`)<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Rule<span class=w>
</span><span class=w>    </span><span class=k>services</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span><span class=w>  </span><span class=k>tls</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>certResolver</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span></code></pre></td></tr></table></div></div><h3 id=kubernetes-dashboard>kubernetes dashboard</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>traefik.containo.us/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRoute<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>ingressroutetls-dashboard<span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>entryPoints</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- websecure<span class=w>
</span><span class=w>  </span><span class=k>routes</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>match</span><span class=p>:</span><span class=w> </span>Host(`dashboard.kube.example.com`)<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Rule<span class=w>
</span><span class=w>    </span><span class=k>services</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>kubernetes-dashboard<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>443</span><span class=w>
</span><span class=w>  </span><span class=k>tls</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>certResolver</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span></code></pre></td></tr></table></div></div><h3 id=mongodb-开放访问>mongodb 开放访问</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>traefik.containo.us/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRouteTCP<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>mongodb<span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>yunwei<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>entryPoints</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- tcpep<span class=w>
</span><span class=w>  </span><span class=k>routes</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>match</span><span class=p>:</span><span class=w> </span>HostSNI(`mongo.kube.2xi.com`)<span class=w>
</span><span class=w>    </span><span class=k>services</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>mongodb<span class=w>
</span><span class=w>      </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>27017</span><span class=w>
</span><span class=w>  </span><span class=k>tls</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>certResolver</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span></code></pre></td></tr></table></div></div><blockquote><p>TCP UDP 使用的是<strong>HostSNI</strong></p><p>HostSNI 如果要用域名，那么必须配置tls，我这里配置的是acm。</p><p>HostSNI 如果不使用tls，那么用 <strong>*</strong> 代替域名,这个时候一个端口只能代理一个服务。</p></blockquote><h3 id=配置-basicauth-或是-digestauth-密码验证>配置 <strong>BasicAuth</strong> 或是 <strong>DigestAuth</strong> 密码验证</h3><blockquote><p>DigestAuth，和 BasicAuth 中间件是一种限制访问权限的简单方法。</p><p>DigestAuth 相比 BasicAuth ,更加安全</p><p>DigestAuth 只支持realm = traefik</p></blockquote><ol><li><p>生成密码</p><blockquote><p><strong>BasicAuth</strong> 和 <strong>DigestAuth</strong> 只是在生成密码的时候有区别，使用的时候都一样</p></blockquote><p>BasicAuth - 使用 <strong>htpasswd</strong> 命令生成</p><p>DigestAuth - 使用 <strong>htdigest</strong> 命令生成</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell><span class=c1># ubuntu 需要先安装以上两个命令</span>
sudo apt-get install apache2-utils
<span class=c1># 生成 BasicAuth</span>
➜  traefik htpasswd -cbB traefik admin admin
 Adding password <span class=k>for</span> user admin
➜  traefik cat traefik
 admin:<span class=nv>$2</span>y<span class=nv>$05$u81X</span>.TPakpiyj1aexy9YZe3s58/.z91nY6D41ob4eYe8sW1uUZxOq
<span class=c1># 生成 DigestAuth</span>
➜  htdigest -c traefik traefik admin
 Adding password <span class=k>for</span> admin in realm traefik.
 New password:
 Re-type new password:
➜  traefik cat traefik
 admin:traefik:234480a045a95d420967533e3e017b22
</code></pre></td></tr></table></div></div></li><li><p>使用 <strong>kubectl</strong> 创建 <strong>secret</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>➜  traefik kubectl create secret generic traefik-user  --from-file<span class=o>=</span><span class=nv>users</span><span class=o>=</span>traefik
 secret/traefik-user created
kubectl describe secret traefik-user
</code></pre></td></tr></table></div></div></li><li><p>创建 middleware</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>traefik.containo.us/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Middleware<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>     </span><span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-digestauth<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>     </span><span class=c># basicAuth</span><span class=w>
</span><span class=w>     </span><span class=k>basicAuth</span><span class=p>:</span><span class=w>
</span><span class=w>         </span><span class=k>secret</span><span class=p>:</span><span class=w> </span>traefik-user<span class=w>
</span><span class=w>     </span><span class=c># 或是 digestAuth</span><span class=w>
</span><span class=w>     </span><span class=k>digestAuth</span><span class=p>:</span><span class=w>
</span><span class=w>         </span><span class=k>secret</span><span class=p>:</span><span class=w> </span>traefik-user<span class=w>
</span></code></pre></td></tr></table></div></div></li><li><p>使用 middleware
在 router 里添加使用 middleware</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>traefik.containo.us/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>IngressRoute<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=k>name</span><span class=p>:</span><span class=w> </span>ingressroutetls-traefik<span class=w>
</span><span class=w></span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>entryPoints</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- websecure<span class=w>
</span><span class=w></span><span class=k>routes</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=k>match</span><span class=p>:</span><span class=w> </span>Host(`traefik.kube.example.com`)<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Rule<span class=w>
</span><span class=w>    </span><span class=k>services</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>traefik<span class=w>
</span><span class=w>        </span><span class=k>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span><span class=w>    </span><span class=k>middlewares</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>traefik-digestauth<span class=w>
</span><span class=w></span><span class=k>tls</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>certResolver</span><span class=p>:</span><span class=w> </span>default<span class=w>
</span></code></pre></td></tr></table></div></div></li></ol><h2 id=最后附上traefik命令帮助>最后附上traefik命令帮助</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span><span class=lnt>206
</span><span class=lnt>207
</span><span class=lnt>208
</span><span class=lnt>209
</span><span class=lnt>210
</span><span class=lnt>211
</span><span class=lnt>212
</span><span class=lnt>213
</span><span class=lnt>214
</span><span class=lnt>215
</span><span class=lnt>216
</span><span class=lnt>217
</span><span class=lnt>218
</span><span class=lnt>219
</span><span class=lnt>220
</span><span class=lnt>221
</span><span class=lnt>222
</span><span class=lnt>223
</span><span class=lnt>224
</span><span class=lnt>225
</span><span class=lnt>226
</span><span class=lnt>227
</span><span class=lnt>228
</span><span class=lnt>229
</span><span class=lnt>230
</span><span class=lnt>231
</span><span class=lnt>232
</span><span class=lnt>233
</span><span class=lnt>234
</span><span class=lnt>235
</span><span class=lnt>236
</span><span class=lnt>237
</span><span class=lnt>238
</span><span class=lnt>239
</span><span class=lnt>240
</span><span class=lnt>241
</span><span class=lnt>242
</span><span class=lnt>243
</span><span class=lnt>244
</span><span class=lnt>245
</span><span class=lnt>246
</span><span class=lnt>247
</span><span class=lnt>248
</span><span class=lnt>249
</span><span class=lnt>250
</span><span class=lnt>251
</span><span class=lnt>252
</span><span class=lnt>253
</span><span class=lnt>254
</span><span class=lnt>255
</span><span class=lnt>256
</span><span class=lnt>257
</span><span class=lnt>258
</span><span class=lnt>259
</span><span class=lnt>260
</span><span class=lnt>261
</span><span class=lnt>262
</span><span class=lnt>263
</span><span class=lnt>264
</span><span class=lnt>265
</span><span class=lnt>266
</span><span class=lnt>267
</span><span class=lnt>268
</span><span class=lnt>269
</span><span class=lnt>270
</span><span class=lnt>271
</span><span class=lnt>272
</span><span class=lnt>273
</span><span class=lnt>274
</span><span class=lnt>275
</span><span class=lnt>276
</span><span class=lnt>277
</span><span class=lnt>278
</span><span class=lnt>279
</span><span class=lnt>280
</span><span class=lnt>281
</span><span class=lnt>282
</span><span class=lnt>283
</span><span class=lnt>284
</span><span class=lnt>285
</span><span class=lnt>286
</span><span class=lnt>287
</span><span class=lnt>288
</span><span class=lnt>289
</span><span class=lnt>290
</span><span class=lnt>291
</span><span class=lnt>292
</span><span class=lnt>293
</span><span class=lnt>294
</span><span class=lnt>295
</span><span class=lnt>296
</span><span class=lnt>297
</span><span class=lnt>298
</span><span class=lnt>299
</span><span class=lnt>300
</span><span class=lnt>301
</span><span class=lnt>302
</span><span class=lnt>303
</span><span class=lnt>304
</span><span class=lnt>305
</span><span class=lnt>306
</span><span class=lnt>307
</span><span class=lnt>308
</span><span class=lnt>309
</span><span class=lnt>310
</span><span class=lnt>311
</span><span class=lnt>312
</span><span class=lnt>313
</span><span class=lnt>314
</span><span class=lnt>315
</span><span class=lnt>316
</span><span class=lnt>317
</span><span class=lnt>318
</span><span class=lnt>319
</span><span class=lnt>320
</span><span class=lnt>321
</span><span class=lnt>322
</span><span class=lnt>323
</span><span class=lnt>324
</span><span class=lnt>325
</span><span class=lnt>326
</span><span class=lnt>327
</span><span class=lnt>328
</span><span class=lnt>329
</span><span class=lnt>330
</span><span class=lnt>331
</span><span class=lnt>332
</span><span class=lnt>333
</span><span class=lnt>334
</span><span class=lnt>335
</span><span class=lnt>336
</span><span class=lnt>337
</span><span class=lnt>338
</span><span class=lnt>339
</span><span class=lnt>340
</span><span class=lnt>341
</span><span class=lnt>342
</span><span class=lnt>343
</span><span class=lnt>344
</span><span class=lnt>345
</span><span class=lnt>346
</span><span class=lnt>347
</span><span class=lnt>348
</span><span class=lnt>349
</span><span class=lnt>350
</span><span class=lnt>351
</span><span class=lnt>352
</span><span class=lnt>353
</span><span class=lnt>354
</span><span class=lnt>355
</span><span class=lnt>356
</span><span class=lnt>357
</span><span class=lnt>358
</span><span class=lnt>359
</span><span class=lnt>360
</span><span class=lnt>361
</span><span class=lnt>362
</span><span class=lnt>363
</span><span class=lnt>364
</span><span class=lnt>365
</span><span class=lnt>366
</span><span class=lnt>367
</span><span class=lnt>368
</span><span class=lnt>369
</span><span class=lnt>370
</span><span class=lnt>371
</span><span class=lnt>372
</span><span class=lnt>373
</span><span class=lnt>374
</span><span class=lnt>375
</span><span class=lnt>376
</span><span class=lnt>377
</span><span class=lnt>378
</span><span class=lnt>379
</span><span class=lnt>380
</span><span class=lnt>381
</span><span class=lnt>382
</span><span class=lnt>383
</span><span class=lnt>384
</span><span class=lnt>385
</span><span class=lnt>386
</span><span class=lnt>387
</span><span class=lnt>388
</span><span class=lnt>389
</span><span class=lnt>390
</span><span class=lnt>391
</span><span class=lnt>392
</span><span class=lnt>393
</span><span class=lnt>394
</span><span class=lnt>395
</span><span class=lnt>396
</span><span class=lnt>397
</span><span class=lnt>398
</span><span class=lnt>399
</span><span class=lnt>400
</span><span class=lnt>401
</span><span class=lnt>402
</span><span class=lnt>403
</span><span class=lnt>404
</span><span class=lnt>405
</span><span class=lnt>406
</span><span class=lnt>407
</span><span class=lnt>408
</span><span class=lnt>409
</span><span class=lnt>410
</span><span class=lnt>411
</span><span class=lnt>412
</span><span class=lnt>413
</span><span class=lnt>414
</span><span class=lnt>415
</span><span class=lnt>416
</span><span class=lnt>417
</span><span class=lnt>418
</span><span class=lnt>419
</span><span class=lnt>420
</span><span class=lnt>421
</span><span class=lnt>422
</span><span class=lnt>423
</span><span class=lnt>424
</span><span class=lnt>425
</span><span class=lnt>426
</span><span class=lnt>427
</span><span class=lnt>428
</span><span class=lnt>429
</span><span class=lnt>430
</span><span class=lnt>431
</span><span class=lnt>432
</span><span class=lnt>433
</span><span class=lnt>434
</span><span class=lnt>435
</span><span class=lnt>436
</span><span class=lnt>437
</span><span class=lnt>438
</span><span class=lnt>439
</span><span class=lnt>440
</span><span class=lnt>441
</span><span class=lnt>442
</span><span class=lnt>443
</span><span class=lnt>444
</span><span class=lnt>445
</span><span class=lnt>446
</span><span class=lnt>447
</span><span class=lnt>448
</span><span class=lnt>449
</span><span class=lnt>450
</span><span class=lnt>451
</span><span class=lnt>452
</span><span class=lnt>453
</span><span class=lnt>454
</span><span class=lnt>455
</span><span class=lnt>456
</span><span class=lnt>457
</span><span class=lnt>458
</span><span class=lnt>459
</span><span class=lnt>460
</span><span class=lnt>461
</span><span class=lnt>462
</span><span class=lnt>463
</span><span class=lnt>464
</span><span class=lnt>465
</span><span class=lnt>466
</span><span class=lnt>467
</span><span class=lnt>468
</span><span class=lnt>469
</span><span class=lnt>470
</span><span class=lnt>471
</span><span class=lnt>472
</span><span class=lnt>473
</span><span class=lnt>474
</span><span class=lnt>475
</span><span class=lnt>476
</span><span class=lnt>477
</span><span class=lnt>478
</span><span class=lnt>479
</span><span class=lnt>480
</span><span class=lnt>481
</span><span class=lnt>482
</span><span class=lnt>483
</span><span class=lnt>484
</span><span class=lnt>485
</span><span class=lnt>486
</span><span class=lnt>487
</span><span class=lnt>488
</span><span class=lnt>489
</span><span class=lnt>490
</span><span class=lnt>491
</span><span class=lnt>492
</span><span class=lnt>493
</span><span class=lnt>494
</span><span class=lnt>495
</span><span class=lnt>496
</span><span class=lnt>497
</span><span class=lnt>498
</span><span class=lnt>499
</span><span class=lnt>500
</span><span class=lnt>501
</span><span class=lnt>502
</span><span class=lnt>503
</span><span class=lnt>504
</span><span class=lnt>505
</span><span class=lnt>506
</span><span class=lnt>507
</span><span class=lnt>508
</span><span class=lnt>509
</span><span class=lnt>510
</span><span class=lnt>511
</span><span class=lnt>512
</span><span class=lnt>513
</span><span class=lnt>514
</span><span class=lnt>515
</span><span class=lnt>516
</span><span class=lnt>517
</span><span class=lnt>518
</span><span class=lnt>519
</span><span class=lnt>520
</span><span class=lnt>521
</span><span class=lnt>522
</span><span class=lnt>523
</span><span class=lnt>524
</span><span class=lnt>525
</span><span class=lnt>526
</span><span class=lnt>527
</span><span class=lnt>528
</span><span class=lnt>529
</span><span class=lnt>530
</span><span class=lnt>531
</span><span class=lnt>532
</span><span class=lnt>533
</span><span class=lnt>534
</span><span class=lnt>535
</span><span class=lnt>536
</span><span class=lnt>537
</span><span class=lnt>538
</span><span class=lnt>539
</span><span class=lnt>540
</span><span class=lnt>541
</span><span class=lnt>542
</span><span class=lnt>543
</span><span class=lnt>544
</span><span class=lnt>545
</span><span class=lnt>546
</span><span class=lnt>547
</span><span class=lnt>548
</span><span class=lnt>549
</span><span class=lnt>550
</span><span class=lnt>551
</span><span class=lnt>552
</span><span class=lnt>553
</span><span class=lnt>554
</span><span class=lnt>555
</span><span class=lnt>556
</span><span class=lnt>557
</span><span class=lnt>558
</span><span class=lnt>559
</span><span class=lnt>560
</span><span class=lnt>561
</span><span class=lnt>562
</span><span class=lnt>563
</span><span class=lnt>564
</span><span class=lnt>565
</span><span class=lnt>566
</span><span class=lnt>567
</span><span class=lnt>568
</span><span class=lnt>569
</span><span class=lnt>570
</span><span class=lnt>571
</span><span class=lnt>572
</span><span class=lnt>573
</span><span class=lnt>574
</span><span class=lnt>575
</span><span class=lnt>576
</span><span class=lnt>577
</span><span class=lnt>578
</span><span class=lnt>579
</span><span class=lnt>580
</span><span class=lnt>581
</span><span class=lnt>582
</span><span class=lnt>583
</span><span class=lnt>584
</span><span class=lnt>585
</span><span class=lnt>586
</span><span class=lnt>587
</span><span class=lnt>588
</span><span class=lnt>589
</span><span class=lnt>590
</span><span class=lnt>591
</span><span class=lnt>592
</span><span class=lnt>593
</span><span class=lnt>594
</span><span class=lnt>595
</span><span class=lnt>596
</span><span class=lnt>597
</span><span class=lnt>598
</span><span class=lnt>599
</span><span class=lnt>600
</span><span class=lnt>601
</span><span class=lnt>602
</span><span class=lnt>603
</span><span class=lnt>604
</span><span class=lnt>605
</span><span class=lnt>606
</span><span class=lnt>607
</span><span class=lnt>608
</span><span class=lnt>609
</span><span class=lnt>610
</span><span class=lnt>611
</span><span class=lnt>612
</span><span class=lnt>613
</span><span class=lnt>614
</span><span class=lnt>615
</span><span class=lnt>616
</span><span class=lnt>617
</span><span class=lnt>618
</span><span class=lnt>619
</span><span class=lnt>620
</span><span class=lnt>621
</span><span class=lnt>622
</span><span class=lnt>623
</span><span class=lnt>624
</span><span class=lnt>625
</span><span class=lnt>626
</span><span class=lnt>627
</span><span class=lnt>628
</span><span class=lnt>629
</span><span class=lnt>630
</span><span class=lnt>631
</span><span class=lnt>632
</span><span class=lnt>633
</span><span class=lnt>634
</span><span class=lnt>635
</span><span class=lnt>636
</span><span class=lnt>637
</span><span class=lnt>638
</span><span class=lnt>639
</span><span class=lnt>640
</span><span class=lnt>641
</span><span class=lnt>642
</span><span class=lnt>643
</span><span class=lnt>644
</span><span class=lnt>645
</span><span class=lnt>646
</span><span class=lnt>647
</span><span class=lnt>648
</span><span class=lnt>649
</span><span class=lnt>650
</span><span class=lnt>651
</span><span class=lnt>652
</span><span class=lnt>653
</span><span class=lnt>654
</span><span class=lnt>655
</span><span class=lnt>656
</span><span class=lnt>657
</span><span class=lnt>658
</span><span class=lnt>659
</span><span class=lnt>660
</span><span class=lnt>661
</span><span class=lnt>662
</span><span class=lnt>663
</span><span class=lnt>664
</span><span class=lnt>665
</span><span class=lnt>666
</span><span class=lnt>667
</span><span class=lnt>668
</span><span class=lnt>669
</span><span class=lnt>670
</span><span class=lnt>671
</span><span class=lnt>672
</span><span class=lnt>673
</span><span class=lnt>674
</span><span class=lnt>675
</span><span class=lnt>676
</span><span class=lnt>677
</span><span class=lnt>678
</span><span class=lnt>679
</span><span class=lnt>680
</span><span class=lnt>681
</span><span class=lnt>682
</span><span class=lnt>683
</span><span class=lnt>684
</span><span class=lnt>685
</span><span class=lnt>686
</span><span class=lnt>687
</span><span class=lnt>688
</span><span class=lnt>689
</span><span class=lnt>690
</span><span class=lnt>691
</span><span class=lnt>692
</span><span class=lnt>693
</span><span class=lnt>694
</span><span class=lnt>695
</span><span class=lnt>696
</span><span class=lnt>697
</span><span class=lnt>698
</span><span class=lnt>699
</span><span class=lnt>700
</span><span class=lnt>701
</span><span class=lnt>702
</span><span class=lnt>703
</span><span class=lnt>704
</span><span class=lnt>705
</span><span class=lnt>706
</span><span class=lnt>707
</span><span class=lnt>708
</span><span class=lnt>709
</span><span class=lnt>710
</span><span class=lnt>711
</span><span class=lnt>712
</span><span class=lnt>713
</span><span class=lnt>714
</span><span class=lnt>715
</span><span class=lnt>716
</span><span class=lnt>717
</span><span class=lnt>718
</span><span class=lnt>719
</span><span class=lnt>720
</span><span class=lnt>721
</span><span class=lnt>722
</span><span class=lnt>723
</span><span class=lnt>724
</span><span class=lnt>725
</span><span class=lnt>726
</span><span class=lnt>727
</span><span class=lnt>728
</span><span class=lnt>729
</span><span class=lnt>730
</span><span class=lnt>731
</span><span class=lnt>732
</span><span class=lnt>733
</span><span class=lnt>734
</span><span class=lnt>735
</span><span class=lnt>736
</span><span class=lnt>737
</span><span class=lnt>738
</span><span class=lnt>739
</span><span class=lnt>740
</span><span class=lnt>741
</span><span class=lnt>742
</span><span class=lnt>743
</span><span class=lnt>744
</span><span class=lnt>745
</span><span class=lnt>746
</span><span class=lnt>747
</span><span class=lnt>748
</span><span class=lnt>749
</span><span class=lnt>750
</span><span class=lnt>751
</span><span class=lnt>752
</span><span class=lnt>753
</span><span class=lnt>754
</span><span class=lnt>755
</span><span class=lnt>756
</span><span class=lnt>757
</span><span class=lnt>758
</span><span class=lnt>759
</span><span class=lnt>760
</span><span class=lnt>761
</span><span class=lnt>762
</span><span class=lnt>763
</span><span class=lnt>764
</span><span class=lnt>765
</span><span class=lnt>766
</span><span class=lnt>767
</span><span class=lnt>768
</span><span class=lnt>769
</span><span class=lnt>770
</span><span class=lnt>771
</span><span class=lnt>772
</span><span class=lnt>773
</span><span class=lnt>774
</span><span class=lnt>775
</span><span class=lnt>776
</span><span class=lnt>777
</span><span class=lnt>778
</span><span class=lnt>779
</span><span class=lnt>780
</span><span class=lnt>781
</span><span class=lnt>782
</span><span class=lnt>783
</span><span class=lnt>784
</span><span class=lnt>785
</span><span class=lnt>786
</span><span class=lnt>787
</span><span class=lnt>788
</span><span class=lnt>789
</span><span class=lnt>790
</span><span class=lnt>791
</span><span class=lnt>792
</span><span class=lnt>793
</span><span class=lnt>794
</span><span class=lnt>795
</span><span class=lnt>796
</span><span class=lnt>797
</span><span class=lnt>798
</span><span class=lnt>799
</span><span class=lnt>800
</span><span class=lnt>801
</span><span class=lnt>802
</span><span class=lnt>803
</span><span class=lnt>804
</span><span class=lnt>805
</span><span class=lnt>806
</span><span class=lnt>807
</span><span class=lnt>808
</span><span class=lnt>809
</span><span class=lnt>810
</span><span class=lnt>811
</span><span class=lnt>812
</span><span class=lnt>813
</span><span class=lnt>814
</span><span class=lnt>815
</span><span class=lnt>816
</span><span class=lnt>817
</span><span class=lnt>818
</span><span class=lnt>819
</span><span class=lnt>820
</span><span class=lnt>821
</span><span class=lnt>822
</span><span class=lnt>823
</span><span class=lnt>824
</span><span class=lnt>825
</span><span class=lnt>826
</span><span class=lnt>827
</span><span class=lnt>828
</span><span class=lnt>829
</span><span class=lnt>830
</span><span class=lnt>831
</span><span class=lnt>832
</span><span class=lnt>833
</span><span class=lnt>834
</span><span class=lnt>835
</span><span class=lnt>836
</span><span class=lnt>837
</span><span class=lnt>838
</span><span class=lnt>839
</span><span class=lnt>840
</span><span class=lnt>841
</span><span class=lnt>842
</span><span class=lnt>843
</span><span class=lnt>844
</span><span class=lnt>845
</span><span class=lnt>846
</span><span class=lnt>847
</span><span class=lnt>848
</span><span class=lnt>849
</span><span class=lnt>850
</span><span class=lnt>851
</span><span class=lnt>852
</span><span class=lnt>853
</span><span class=lnt>854
</span><span class=lnt>855
</span><span class=lnt>856
</span><span class=lnt>857
</span><span class=lnt>858
</span><span class=lnt>859
</span><span class=lnt>860
</span><span class=lnt>861
</span><span class=lnt>862
</span><span class=lnt>863
</span><span class=lnt>864
</span><span class=lnt>865
</span><span class=lnt>866
</span><span class=lnt>867
</span><span class=lnt>868
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>root@192:~# docker run -it traefik:v2.2 traefik --help
traefik    Traefik is a modern HTTP reverse proxy and load balancer made to deploy microservices with ease.
Complete documentation is available at https://traefik.io

Usage: traefik [command] [flags] [arguments]

Use &#34;traefik [command] --help&#34; for help on any command.

Commands:
    healthcheck    Calls Traefik /ping endpoint (disabled by default) to check the health of Traefik.
    version        Shows the current Traefik version.

Flag&#39;s usage: traefik [--flag=flag_argument] [-f [flag_argument]]    # set flag_argument to flag(s)
          or: traefik [--flag[=true|false| ]] [-f [true|false| ]]    # set true/false to boolean flag(s)

Flags:
    --accesslog  (Default: &#34;false&#34;)
        Access log settings.

    --accesslog.bufferingsize  (Default: &#34;0&#34;)
        Number of access log lines to process in a buffered way.

    --accesslog.fields.defaultmode  (Default: &#34;keep&#34;)
        Default mode for fields: keep | drop

    --accesslog.fields.headers.defaultmode  (Default: &#34;drop&#34;)
        Default mode for fields: keep | drop | redact

    --accesslog.fields.headers.names.&lt;name&gt;  (Default: &#34;&#34;)
        Override mode for headers

    --accesslog.fields.names.&lt;name&gt;  (Default: &#34;&#34;)
        Override mode for fields

    --accesslog.filepath  (Default: &#34;&#34;)
        Access log file path. Stdout is used when omitted or empty.

    --accesslog.filters.minduration  (Default: &#34;0&#34;)
        Keep access logs when request took longer than the specified duration.

    --accesslog.filters.retryattempts  (Default: &#34;false&#34;)
        Keep access logs when at least one retry happened.

    --accesslog.filters.statuscodes  (Default: &#34;&#34;)
        Keep access logs with status codes in the specified range.

    --accesslog.format  (Default: &#34;common&#34;)
        Access log format: json | common

    --api  (Default: &#34;false&#34;)
        Enable api/dashboard.

    --api.dashboard  (Default: &#34;true&#34;)
        Activate dashboard.

    --api.debug  (Default: &#34;false&#34;)
        Enable additional endpoints for debugging and profiling.

    --api.insecure  (Default: &#34;false&#34;)
        Activate API directly on the entryPoint named traefik.

    --certificatesresolvers.&lt;name&gt;  (Default: &#34;false&#34;)
        Certificates resolvers configuration.

    --certificatesresolvers.&lt;name&gt;.acme.caserver  (Default: &#34;https://acme-v02.api.letsencrypt.org/directory&#34;)
        CA server to use.

    --certificatesresolvers.&lt;name&gt;.acme.dnschallenge  (Default: &#34;false&#34;)
        Activate DNS-01 Challenge.

    --certificatesresolvers.&lt;name&gt;.acme.dnschallenge.delaybeforecheck  (Default: &#34;0&#34;)
        Assume DNS propagates after a delay in seconds rather than finding and querying
        nameservers.

    --certificatesresolvers.&lt;name&gt;.acme.dnschallenge.disablepropagationcheck  (Default: &#34;false&#34;)
        Disable the DNS propagation checks before notifying ACME that the DNS challenge
        is ready. [not recommended]

    --certificatesresolvers.&lt;name&gt;.acme.dnschallenge.provider  (Default: &#34;&#34;)
        Use a DNS-01 based challenge provider rather than HTTPS.

    --certificatesresolvers.&lt;name&gt;.acme.dnschallenge.resolvers  (Default: &#34;&#34;)
        Use following DNS servers to resolve the FQDN authority.

    --certificatesresolvers.&lt;name&gt;.acme.email  (Default: &#34;&#34;)
        Email address used for registration.

    --certificatesresolvers.&lt;name&gt;.acme.httpchallenge  (Default: &#34;false&#34;)
        Activate HTTP-01 Challenge.

    --certificatesresolvers.&lt;name&gt;.acme.httpchallenge.entrypoint  (Default: &#34;&#34;)
        HTTP challenge EntryPoint

    --certificatesresolvers.&lt;name&gt;.acme.keytype  (Default: &#34;RSA4096&#34;)
        KeyType used for generating certificate private key. Allow value &#39;EC256&#39;,
        &#39;EC384&#39;, &#39;RSA2048&#39;, &#39;RSA4096&#39;, &#39;RSA8192&#39;.

    --certificatesresolvers.&lt;name&gt;.acme.storage  (Default: &#34;acme.json&#34;)
        Storage to use.

    --certificatesresolvers.&lt;name&gt;.acme.tlschallenge  (Default: &#34;true&#34;)
        Activate TLS-ALPN-01 Challenge.

    --configfile  (Default: &#34;&#34;)
        Configuration file to use. If specified all other flags are ignored.

    --entrypoints.&lt;name&gt;  (Default: &#34;false&#34;)
        Entry points definition.

    --entrypoints.&lt;name&gt;.address  (Default: &#34;&#34;)
        Entry point address.

    --entrypoints.&lt;name&gt;.forwardedheaders.insecure  (Default: &#34;false&#34;)
        Trust all forwarded headers.

    --entrypoints.&lt;name&gt;.forwardedheaders.trustedips  (Default: &#34;&#34;)
        Trust only forwarded headers from selected IPs.

    --entrypoints.&lt;name&gt;.http  (Default: &#34;&#34;)
        HTTP configuration.

    --entrypoints.&lt;name&gt;.http.middlewares  (Default: &#34;&#34;)
        Default middlewares for the routers linked to the entry point.

    --entrypoints.&lt;name&gt;.http.redirections.entrypoint.permanent  (Default: &#34;true&#34;)
        Applies a permanent redirection.

    --entrypoints.&lt;name&gt;.http.redirections.entrypoint.priority  (Default: &#34;2147483647&#34;)
        Priority of the generated router.

    --entrypoints.&lt;name&gt;.http.redirections.entrypoint.scheme  (Default: &#34;https&#34;)
        Scheme used for the redirection.

    --entrypoints.&lt;name&gt;.http.redirections.entrypoint.to  (Default: &#34;&#34;)
        Targeted entry point of the redirection.

    --entrypoints.&lt;name&gt;.http.tls  (Default: &#34;false&#34;)
        Default TLS configuration for the routers linked to the entry point.

    --entrypoints.&lt;name&gt;.http.tls.certresolver  (Default: &#34;&#34;)
        Default certificate resolver for the routers linked to the entry point.

    --entrypoints.&lt;name&gt;.http.tls.domains  (Default: &#34;&#34;)
        Default TLS domains for the routers linked to the entry point.

    --entrypoints.&lt;name&gt;.http.tls.domains[n].main  (Default: &#34;&#34;)
        Default subject name.

    --entrypoints.&lt;name&gt;.http.tls.domains[n].sans  (Default: &#34;&#34;)
        Subject alternative names.

    --entrypoints.&lt;name&gt;.http.tls.options  (Default: &#34;&#34;)
        Default TLS options for the routers linked to the entry point.

    --entrypoints.&lt;name&gt;.proxyprotocol  (Default: &#34;false&#34;)
        Proxy-Protocol configuration.

    --entrypoints.&lt;name&gt;.proxyprotocol.insecure  (Default: &#34;false&#34;)
        Trust all.

    --entrypoints.&lt;name&gt;.proxyprotocol.trustedips  (Default: &#34;&#34;)
        Trust only selected IPs.

    --entrypoints.&lt;name&gt;.transport.lifecycle.gracetimeout  (Default: &#34;10&#34;)
        Duration to give active requests a chance to finish before Traefik stops.

    --entrypoints.&lt;name&gt;.transport.lifecycle.requestacceptgracetimeout  (Default: &#34;0&#34;)
        Duration to keep accepting requests before Traefik initiates the graceful
        shutdown procedure.

    --entrypoints.&lt;name&gt;.transport.respondingtimeouts.idletimeout  (Default: &#34;180&#34;)
        IdleTimeout is the maximum amount duration an idle (keep-alive) connection will
        remain idle before closing itself. If zero, no timeout is set.

    --entrypoints.&lt;name&gt;.transport.respondingtimeouts.readtimeout  (Default: &#34;0&#34;)
        ReadTimeout is the maximum duration for reading the entire request, including
        the body. If zero, no timeout is set.

    --entrypoints.&lt;name&gt;.transport.respondingtimeouts.writetimeout  (Default: &#34;0&#34;)
        WriteTimeout is the maximum duration before timing out writes of the response.
        If zero, no timeout is set.

    --global.checknewversion  (Default: &#34;true&#34;)
        Periodically check if a new version has been released.

    --global.sendanonymoususage
        Periodically send anonymous usage statistics. If the option is not specified, it
        will be enabled by default.

    --hostresolver  (Default: &#34;false&#34;)
        Enable CNAME Flattening.

    --hostresolver.cnameflattening  (Default: &#34;false&#34;)
        A flag to enable/disable CNAME flattening

    --hostresolver.resolvconfig  (Default: &#34;/etc/resolv.conf&#34;)
        resolv.conf used for DNS resolving

    --hostresolver.resolvdepth  (Default: &#34;5&#34;)
        The maximal depth of DNS recursive resolving

    --log  (Default: &#34;false&#34;)
        Traefik log settings.

    --log.filepath  (Default: &#34;&#34;)
        Traefik log file path. Stdout is used when omitted or empty.

    --log.format  (Default: &#34;common&#34;)
        Traefik log format: json | common

    --log.level  (Default: &#34;ERROR&#34;)
        Log level set to traefik logs.

    --metrics.datadog  (Default: &#34;false&#34;)
        Datadog metrics exporter type.

    --metrics.datadog.addentrypointslabels  (Default: &#34;true&#34;)
        Enable metrics on entry points.

    --metrics.datadog.address  (Default: &#34;localhost:8125&#34;)
        Datadog&#39;s address.

    --metrics.datadog.addserviceslabels  (Default: &#34;true&#34;)
        Enable metrics on services.

    --metrics.datadog.pushinterval  (Default: &#34;10&#34;)
        Datadog push interval.

    --metrics.influxdb  (Default: &#34;false&#34;)
        InfluxDB metrics exporter type.

    --metrics.influxdb.addentrypointslabels  (Default: &#34;true&#34;)
        Enable metrics on entry points.

    --metrics.influxdb.address  (Default: &#34;localhost:8089&#34;)
        InfluxDB address.

    --metrics.influxdb.addserviceslabels  (Default: &#34;true&#34;)
        Enable metrics on services.

    --metrics.influxdb.database  (Default: &#34;&#34;)
        InfluxDB database used when protocol is http.

    --metrics.influxdb.password  (Default: &#34;&#34;)
        InfluxDB password (only with http).

    --metrics.influxdb.protocol  (Default: &#34;udp&#34;)
        InfluxDB address protocol (udp or http).

    --metrics.influxdb.pushinterval  (Default: &#34;10&#34;)
        InfluxDB push interval.

    --metrics.influxdb.retentionpolicy  (Default: &#34;&#34;)
        InfluxDB retention policy used when protocol is http.

    --metrics.influxdb.username  (Default: &#34;&#34;)
        InfluxDB username (only with http).

    --metrics.prometheus  (Default: &#34;false&#34;)
        Prometheus metrics exporter type.

    --metrics.prometheus.addentrypointslabels  (Default: &#34;true&#34;)
        Enable metrics on entry points.

    --metrics.prometheus.addserviceslabels  (Default: &#34;true&#34;)
        Enable metrics on services.

    --metrics.prometheus.buckets  (Default: &#34;0.100000, 0.300000, 1.200000, 5.000000&#34;)
        Buckets for latency metrics.

    --metrics.prometheus.entrypoint  (Default: &#34;traefik&#34;)
        EntryPoint

    --metrics.prometheus.manualrouting  (Default: &#34;false&#34;)
        Manual routing

    --metrics.statsd  (Default: &#34;false&#34;)
        StatsD metrics exporter type.

    --metrics.statsd.addentrypointslabels  (Default: &#34;true&#34;)
        Enable metrics on entry points.

    --metrics.statsd.address  (Default: &#34;localhost:8125&#34;)
        StatsD address.

    --metrics.statsd.addserviceslabels  (Default: &#34;true&#34;)
        Enable metrics on services.

    --metrics.statsd.prefix  (Default: &#34;traefik&#34;)
        Prefix to use for metrics collection.

    --metrics.statsd.pushinterval  (Default: &#34;10&#34;)
        StatsD push interval.

    --ping  (Default: &#34;false&#34;)
        Enable ping.

    --ping.entrypoint  (Default: &#34;traefik&#34;)
        EntryPoint

    --ping.manualrouting  (Default: &#34;false&#34;)
        Manual routing

    --providers.consul  (Default: &#34;false&#34;)
        Enable Consul backend with default settings.

    --providers.consul.endpoints  (Default: &#34;127.0.0.1:8500&#34;)
        KV store endpoints

    --providers.consul.password  (Default: &#34;&#34;)
        KV Password

    --providers.consul.rootkey  (Default: &#34;traefik&#34;)
        Root key used for KV store

    --providers.consul.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.consul.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.consul.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.consul.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.consul.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.consul.username  (Default: &#34;&#34;)
        KV Username

    --providers.consulcatalog.cache  (Default: &#34;false&#34;)
        Use local agent caching for catalog reads.

    --providers.consulcatalog.constraints  (Default: &#34;&#34;)
        Constraints is an expression that Traefik matches against the container&#39;s labels
        to determine whether to create any route for that container.

    --providers.consulcatalog.defaultrule  (Default: &#34;Host(`{{ normalize .Name }}`)&#34;)
        Default rule.

    --providers.consulcatalog.endpoint.address  (Default: &#34;http://127.0.0.1:8500&#34;)
        The address of the Consul server

    --providers.consulcatalog.endpoint.datacenter  (Default: &#34;&#34;)
        Data center to use. If not provided, the default agent data center is used

    --providers.consulcatalog.endpoint.endpointwaittime  (Default: &#34;0&#34;)
        WaitTime limits how long a Watch will block. If not provided, the agent default
        values will be used

    --providers.consulcatalog.endpoint.httpauth.password  (Default: &#34;&#34;)
        Basic Auth password

    --providers.consulcatalog.endpoint.httpauth.username  (Default: &#34;&#34;)
        Basic Auth username

    --providers.consulcatalog.endpoint.scheme  (Default: &#34;&#34;)
        The URI scheme for the Consul server

    --providers.consulcatalog.endpoint.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.consulcatalog.endpoint.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.consulcatalog.endpoint.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.consulcatalog.endpoint.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.consulcatalog.endpoint.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.consulcatalog.endpoint.token  (Default: &#34;&#34;)
        Token is used to provide a per-request ACL token which overrides the agent&#39;s
        default token

    --providers.consulcatalog.exposedbydefault  (Default: &#34;true&#34;)
        Expose containers by default.

    --providers.consulcatalog.prefix  (Default: &#34;traefik&#34;)
        Prefix for consul service tags. Default &#39;traefik&#39;

    --providers.consulcatalog.refreshinterval  (Default: &#34;15&#34;)
        Interval for check Consul API. Default 100ms

    --providers.consulcatalog.requireconsistent  (Default: &#34;false&#34;)
        Forces the read to be fully consistent.

    --providers.consulcatalog.stale  (Default: &#34;false&#34;)
        Use stale consistency for catalog reads.

    --providers.docker  (Default: &#34;false&#34;)
        Enable Docker backend with default settings.

    --providers.docker.constraints  (Default: &#34;&#34;)
        Constraints is an expression that Traefik matches against the container&#39;s labels
        to determine whether to create any route for that container.

    --providers.docker.defaultrule  (Default: &#34;Host(`{{ normalize .Name }}`)&#34;)
        Default rule.

    --providers.docker.endpoint  (Default: &#34;unix:///var/run/docker.sock&#34;)
        Docker server endpoint. Can be a tcp or a unix socket endpoint.

    --providers.docker.exposedbydefault  (Default: &#34;true&#34;)
        Expose containers by default.

    --providers.docker.network  (Default: &#34;&#34;)
        Default Docker network used.

    --providers.docker.swarmmode  (Default: &#34;false&#34;)
        Use Docker on Swarm Mode.

    --providers.docker.swarmmoderefreshseconds  (Default: &#34;15&#34;)
        Polling interval for swarm mode.

    --providers.docker.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.docker.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.docker.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.docker.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.docker.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.docker.usebindportip  (Default: &#34;false&#34;)
        Use the ip address from the bound port, rather than from the inner network.

    --providers.docker.watch  (Default: &#34;true&#34;)
        Watch Docker Swarm events.

    --providers.etcd  (Default: &#34;false&#34;)
        Enable Etcd backend with default settings.

    --providers.etcd.endpoints  (Default: &#34;127.0.0.1:2379&#34;)
        KV store endpoints

    --providers.etcd.password  (Default: &#34;&#34;)
        KV Password

    --providers.etcd.rootkey  (Default: &#34;traefik&#34;)
        Root key used for KV store

    --providers.etcd.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.etcd.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.etcd.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.etcd.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.etcd.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.etcd.username  (Default: &#34;&#34;)
        KV Username

    --providers.file.debugloggeneratedtemplate  (Default: &#34;false&#34;)
        Enable debug logging of generated configuration template.

    --providers.file.directory  (Default: &#34;&#34;)
        Load dynamic configuration from one or more .toml or .yml files in a directory.

    --providers.file.filename  (Default: &#34;&#34;)
        Load dynamic configuration from a file.

    --providers.file.watch  (Default: &#34;true&#34;)
        Watch provider.

    --providers.kubernetescrd  (Default: &#34;false&#34;)
        Enable Kubernetes backend with default settings.

    --providers.kubernetescrd.certauthfilepath  (Default: &#34;&#34;)
        Kubernetes certificate authority file path (not needed for in-cluster client).

    --providers.kubernetescrd.disablepasshostheaders  (Default: &#34;false&#34;)
        Kubernetes disable PassHost Headers.

    --providers.kubernetescrd.endpoint  (Default: &#34;&#34;)
        Kubernetes server endpoint (required for external cluster client).

    --providers.kubernetescrd.ingressclass  (Default: &#34;&#34;)
        Value of kubernetes.io/ingress.class annotation to watch for.

    --providers.kubernetescrd.labelselector  (Default: &#34;&#34;)
        Kubernetes label selector to use.

    --providers.kubernetescrd.namespaces  (Default: &#34;&#34;)
        Kubernetes namespaces.

    --providers.kubernetescrd.throttleduration  (Default: &#34;0&#34;)
        Ingress refresh throttle duration

    --providers.kubernetescrd.token  (Default: &#34;&#34;)
        Kubernetes bearer token (not needed for in-cluster client).

    --providers.kubernetesingress  (Default: &#34;false&#34;)
        Enable Kubernetes backend with default settings.

    --providers.kubernetesingress.certauthfilepath  (Default: &#34;&#34;)
        Kubernetes certificate authority file path (not needed for in-cluster client).

    --providers.kubernetesingress.disablepasshostheaders  (Default: &#34;false&#34;)
        Kubernetes disable PassHost Headers.

    --providers.kubernetesingress.endpoint  (Default: &#34;&#34;)
        Kubernetes server endpoint (required for external cluster client).

    --providers.kubernetesingress.ingressclass  (Default: &#34;&#34;)
        Value of kubernetes.io/ingress.class annotation to watch for.

    --providers.kubernetesingress.ingressendpoint.hostname  (Default: &#34;&#34;)
        Hostname used for Kubernetes Ingress endpoints.

    --providers.kubernetesingress.ingressendpoint.ip  (Default: &#34;&#34;)
        IP used for Kubernetes Ingress endpoints.

    --providers.kubernetesingress.ingressendpoint.publishedservice  (Default: &#34;&#34;)
        Published Kubernetes Service to copy status from.

    --providers.kubernetesingress.labelselector  (Default: &#34;&#34;)
        Kubernetes Ingress label selector to use.

    --providers.kubernetesingress.namespaces  (Default: &#34;&#34;)
        Kubernetes namespaces.

    --providers.kubernetesingress.throttleduration  (Default: &#34;0&#34;)
        Ingress refresh throttle duration

    --providers.kubernetesingress.token  (Default: &#34;&#34;)
        Kubernetes bearer token (not needed for in-cluster client).

    --providers.marathon  (Default: &#34;false&#34;)
        Enable Marathon backend with default settings.

    --providers.marathon.basic.httpbasicauthuser  (Default: &#34;&#34;)
        Basic authentication User.

    --providers.marathon.basic.httpbasicpassword  (Default: &#34;&#34;)
        Basic authentication Password.

    --providers.marathon.constraints  (Default: &#34;&#34;)
        Constraints is an expression that Traefik matches against the application&#39;s
        labels to determine whether to create any route for that application.

    --providers.marathon.dcostoken  (Default: &#34;&#34;)
        DCOSToken for DCOS environment, This will override the Authorization header.

    --providers.marathon.defaultrule  (Default: &#34;Host(`{{ normalize .Name }}`)&#34;)
        Default rule.

    --providers.marathon.dialertimeout  (Default: &#34;5&#34;)
        Set a dialer timeout for Marathon.

    --providers.marathon.endpoint  (Default: &#34;http://127.0.0.1:8080&#34;)
        Marathon server endpoint. You can also specify multiple endpoint for Marathon.

    --providers.marathon.exposedbydefault  (Default: &#34;true&#34;)
        Expose Marathon apps by default.

    --providers.marathon.forcetaskhostname  (Default: &#34;false&#34;)
        Force to use the task&#39;s hostname.

    --providers.marathon.keepalive  (Default: &#34;10&#34;)
        Set a TCP Keep Alive time.

    --providers.marathon.respectreadinesschecks  (Default: &#34;false&#34;)
        Filter out tasks with non-successful readiness checks during deployments.

    --providers.marathon.responseheadertimeout  (Default: &#34;60&#34;)
        Set a response header timeout for Marathon.

    --providers.marathon.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.marathon.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.marathon.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.marathon.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.marathon.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.marathon.tlshandshaketimeout  (Default: &#34;5&#34;)
        Set a TLS handshake timeout for Marathon.

    --providers.marathon.trace  (Default: &#34;false&#34;)
        Display additional provider logs.

    --providers.marathon.watch  (Default: &#34;true&#34;)
        Watch provider.

    --providers.providersthrottleduration  (Default: &#34;2&#34;)
        Backends throttle duration: minimum duration between 2 events from providers
        before applying a new configuration. It avoids unnecessary reloads if multiples
        events are sent in a short amount of time.

    --providers.rancher  (Default: &#34;false&#34;)
        Enable Rancher backend with default settings.

    --providers.rancher.constraints  (Default: &#34;&#34;)
        Constraints is an expression that Traefik matches against the container&#39;s labels
        to determine whether to create any route for that container.

    --providers.rancher.defaultrule  (Default: &#34;Host(`{{ normalize .Name }}`)&#34;)
        Default rule.

    --providers.rancher.enableservicehealthfilter  (Default: &#34;true&#34;)
        Filter services with unhealthy states and inactive states.

    --providers.rancher.exposedbydefault  (Default: &#34;true&#34;)
        Expose containers by default.

    --providers.rancher.intervalpoll  (Default: &#34;false&#34;)
        Poll the Rancher metadata service every &#39;rancher.refreshseconds&#39; (less
        accurate).

    --providers.rancher.prefix  (Default: &#34;latest&#34;)
        Prefix used for accessing the Rancher metadata service.

    --providers.rancher.refreshseconds  (Default: &#34;15&#34;)
        Defines the polling interval in seconds.

    --providers.rancher.watch  (Default: &#34;true&#34;)
        Watch provider.

    --providers.redis  (Default: &#34;false&#34;)
        Enable Redis backend with default settings.

    --providers.redis.endpoints  (Default: &#34;127.0.0.1:6379&#34;)
        KV store endpoints

    --providers.redis.password  (Default: &#34;&#34;)
        KV Password

    --providers.redis.rootkey  (Default: &#34;traefik&#34;)
        Root key used for KV store

    --providers.redis.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.redis.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.redis.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.redis.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.redis.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.redis.username  (Default: &#34;&#34;)
        KV Username

    --providers.rest  (Default: &#34;false&#34;)
        Enable Rest backend with default settings.

    --providers.rest.insecure  (Default: &#34;false&#34;)
        Activate REST Provider directly on the entryPoint named traefik.

    --providers.zookeeper  (Default: &#34;false&#34;)
        Enable ZooKeeper backend with default settings.

    --providers.zookeeper.endpoints  (Default: &#34;127.0.0.1:2181&#34;)
        KV store endpoints

    --providers.zookeeper.password  (Default: &#34;&#34;)
        KV Password

    --providers.zookeeper.rootkey  (Default: &#34;traefik&#34;)
        Root key used for KV store

    --providers.zookeeper.tls.ca  (Default: &#34;&#34;)
        TLS CA

    --providers.zookeeper.tls.caoptional  (Default: &#34;false&#34;)
        TLS CA.Optional

    --providers.zookeeper.tls.cert  (Default: &#34;&#34;)
        TLS cert

    --providers.zookeeper.tls.insecureskipverify  (Default: &#34;false&#34;)
        TLS insecure skip verify

    --providers.zookeeper.tls.key  (Default: &#34;&#34;)
        TLS key

    --providers.zookeeper.username  (Default: &#34;&#34;)
        KV Username

    --serverstransport.forwardingtimeouts.dialtimeout  (Default: &#34;30&#34;)
        The amount of time to wait until a connection to a backend server can be
        established. If zero, no timeout exists.

    --serverstransport.forwardingtimeouts.idleconntimeout  (Default: &#34;90&#34;)
        The maximum period for which an idle HTTP keep-alive connection will remain open
        before closing itself

    --serverstransport.forwardingtimeouts.responseheadertimeout  (Default: &#34;0&#34;)
        The amount of time to wait for a server&#39;s response headers after fully writing
        the request (including its body, if any). If zero, no timeout exists.

    --serverstransport.insecureskipverify  (Default: &#34;false&#34;)
        Disable SSL certificate verification.

    --serverstransport.maxidleconnsperhost  (Default: &#34;200&#34;)
        If non-zero, controls the maximum idle (keep-alive) to keep per-host. If zero,
        DefaultMaxIdleConnsPerHost is used

    --serverstransport.rootcas  (Default: &#34;&#34;)
        Add cert file for self-signed certificate.

    --tracing  (Default: &#34;false&#34;)
        OpenTracing configuration.

    --tracing.datadog  (Default: &#34;false&#34;)
        Settings for Datadog.

    --tracing.datadog.bagageprefixheadername  (Default: &#34;&#34;)
        Specifies the header name prefix that will be used to store baggage items in a
        map.

    --tracing.datadog.debug  (Default: &#34;false&#34;)
        Enable Datadog debug.

    --tracing.datadog.globaltag  (Default: &#34;&#34;)
        Key:Value tag to be set on all the spans.

    --tracing.datadog.localagenthostport  (Default: &#34;localhost:8126&#34;)
        Set datadog-agent&#39;s host:port that the reporter will used.

    --tracing.datadog.parentidheadername  (Default: &#34;&#34;)
        Specifies the header name that will be used to store the parent ID.

    --tracing.datadog.prioritysampling  (Default: &#34;false&#34;)
        Enable priority sampling. When using distributed tracing, this option must be
        enabled in order to get all the parts of a distributed trace sampled.

    --tracing.datadog.samplingpriorityheadername  (Default: &#34;&#34;)
        Specifies the header name that will be used to store the sampling priority.

    --tracing.datadog.traceidheadername  (Default: &#34;&#34;)
        Specifies the header name that will be used to store the trace ID.

    --tracing.elastic  (Default: &#34;false&#34;)
        Settings for Elastic.

    --tracing.elastic.secrettoken  (Default: &#34;&#34;)
        Set the token used to connect to Elastic APM Server.

    --tracing.elastic.serverurl  (Default: &#34;&#34;)
        Set the URL of the Elastic APM server.

    --tracing.elastic.serviceenvironment  (Default: &#34;&#34;)
        Set the name of the environment Traefik is deployed in, e.g. &#39;production&#39; or
        &#39;staging&#39;.

    --tracing.haystack  (Default: &#34;false&#34;)
        Settings for Haystack.

    --tracing.haystack.baggageprefixheadername  (Default: &#34;&#34;)
        Specifies the header name prefix that will be used to store baggage items in a
        map.

    --tracing.haystack.globaltag  (Default: &#34;&#34;)
        Key:Value tag to be set on all the spans.

    --tracing.haystack.localagenthost  (Default: &#34;127.0.0.1&#34;)
        Set haystack-agent&#39;s host that the reporter will used.

    --tracing.haystack.localagentport  (Default: &#34;35000&#34;)
        Set haystack-agent&#39;s port that the reporter will used.

    --tracing.haystack.parentidheadername  (Default: &#34;&#34;)
        Specifies the header name that will be used to store the parent ID.

    --tracing.haystack.spanidheadername  (Default: &#34;&#34;)
        Specifies the header name that will be used to store the span ID.

    --tracing.haystack.traceidheadername  (Default: &#34;&#34;)
        Specifies the header name that will be used to store the trace ID.

    --tracing.instana  (Default: &#34;false&#34;)
        Settings for Instana.

    --tracing.instana.localagenthost  (Default: &#34;&#34;)
        Set instana-agent&#39;s host that the reporter will used.

    --tracing.instana.localagentport  (Default: &#34;42699&#34;)
        Set instana-agent&#39;s port that the reporter will used.

    --tracing.instana.loglevel  (Default: &#34;info&#34;)
        Set instana-agent&#39;s log level. (&#39;error&#39;,&#39;warn&#39;,&#39;info&#39;,&#39;debug&#39;)

    --tracing.jaeger  (Default: &#34;false&#34;)
        Settings for Jaeger.

    --tracing.jaeger.collector.endpoint  (Default: &#34;&#34;)
        Instructs reporter to send spans to jaeger-collector at this URL.

    --tracing.jaeger.collector.password  (Default: &#34;&#34;)
        Password for basic http authentication when sending spans to jaeger-collector.

    --tracing.jaeger.collector.user  (Default: &#34;&#34;)
        User for basic http authentication when sending spans to jaeger-collector.

    --tracing.jaeger.gen128bit  (Default: &#34;false&#34;)
        Generate 128 bit span IDs.

    --tracing.jaeger.localagenthostport  (Default: &#34;127.0.0.1:6831&#34;)
        Set jaeger-agent&#39;s host:port that the reporter will used.

    --tracing.jaeger.propagation  (Default: &#34;jaeger&#34;)
        Which propagation format to use (jaeger/b3).

    --tracing.jaeger.samplingparam  (Default: &#34;1.000000&#34;)
        Set the sampling parameter.

    --tracing.jaeger.samplingserverurl  (Default: &#34;http://localhost:5778/sampling&#34;)
        Set the sampling server url.

    --tracing.jaeger.samplingtype  (Default: &#34;const&#34;)
        Set the sampling type.

    --tracing.jaeger.tracecontextheadername  (Default: &#34;uber-trace-id&#34;)
        Set the header to use for the trace-id.

    --tracing.servicename  (Default: &#34;traefik&#34;)
        Set the name for this service.

    --tracing.spannamelimit  (Default: &#34;0&#34;)
        Set the maximum character limit for Span names (default 0 = no limit).

    --tracing.zipkin  (Default: &#34;false&#34;)
        Settings for Zipkin.

    --tracing.zipkin.httpendpoint  (Default: &#34;http://localhost:9411/api/v2/spans&#34;)
        HTTP Endpoint to report traces to.

    --tracing.zipkin.id128bit  (Default: &#34;true&#34;)
        Use Zipkin 128 bit root span IDs.

    --tracing.zipkin.samespan  (Default: &#34;false&#34;)
        Use Zipkin SameSpan RPC style traces.

    --tracing.zipkin.samplerate  (Default: &#34;1.000000&#34;)
        The rate between 0.0 and 1.0 of requests to trace.
</code></pre></td></tr></table></div></div></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>goodking-bq</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>2020-05-20</span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/kubernetes/>kubernetes</a>
<a href=/tags/how-to/>how-to</a></div><nav class=post-nav><a class=prev href=/post/kubernetes/dashborad-access/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Kubernetes Dashborad 配置访问</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=/post/kubernetes/cluster-install/><span class="next-text nav-default">kubernetes master集群搭建</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js crossorigin=anonymous></script><script type=text/javascript>var gitalk=new Gitalk({id:'2020-05-20 09:22:19 \u002b0800 \u002b0800',title:'kubernets 里配置 Traefik',clientID:'2a8b1932825256263b83',clientSecret:'911a142ea58b48f7e168576968d15a6e0130204d',repo:'goodking-bq.github.io',owner:'goodking-bq',admin:['goodking-bq'],body:decodeURI(location.href)});gitalk.render('gitalk-container');</script><noscript>Please enable JavaScript to view the <a href=https://github.com/gitalk/gitalk>comments powered by gitalk.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:goodking_bq@hotmail.com class="iconfont icon-email" title=email></a><a href=https://github.com/goodking-bq class="iconfont icon-github" title=github></a><a href=https://goodking-bq.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer><span id=busuanzi_container_site_pv>site pv: <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span></span>
<span class=division>|</span>
<span id=busuanzi_container_site_uv>site uv: <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span></span></div><span class=copyright-year>&copy;
2017 -
2020
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>goodking-bq</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script><script>var languageCode="zh-cn".replace(/-/g,'_').replace(/_(.*)/,function($0,$1){return $0.replace($1,$1.toUpperCase());});timeago().render(document.querySelectorAll('.timeago'),languageCode);timeago.cancel();</script><script>window.sequenceDiagramsOptions={theme:'hand'};</script><script src=https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/snapsvg@0.5.1/dist/snap.svg-min.js integrity="sha256-oI+elz+sIm+jpn8F/qEspKoKveTc5uKeFHNNVexe6d8=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/underscore@1.8.3/underscore-min.js integrity="sha256-obZACiHd7gkOk9iIL/pimWMTJ4W/pBsKu+oZnSeBIek=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.js integrity=sha384-8748Vn52gHJYJI0XEuPB2QlPVNUkJlJn9tHqKec6J3q2r9l8fvRxrgn/E5ZHV0sP crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.css integrity=sha384-6QbLKJMz5dS3adWSeINZe74uSydBGFbnzaAYmp+tKyq60S7H2p6V7g1TysM5lAaF crossorigin=anonymous><script type=text/javascript src=/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js></script></body></html>